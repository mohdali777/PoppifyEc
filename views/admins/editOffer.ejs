<%- include('../partials/admin/header') %>
<%- include('../partials/admin/sidebar') %>

<link rel="stylesheet" href="/admincss/createOffer.css">


<% if (message) { %> <p class="message " style=" font-size: 16px; /* Slightly smaller than the timer */
color: #d32f2f; /* Red color for error messages */
font-weight: 500; /* Medium weight */
text-align: center; /* Center align */
margin-top: 5px;"><%= message %></p> <% } %>

<div class="offer-form-container">
    <h2>Create Offer</h2>
    <form id="create-offer-form" >
        <input type="text" name="id" value="<%= offer._id %>" hidden>
      <div class="form-group">
        <label for="offer-name" >Offer Name:</label>
        <input type="text" name="offerName" id="offer-name" value="<%= offer.offerName %>" placeholder="Offer Name">
      </div>
      <div class="form-group">
        <label for="offer-type">Offer Type:</label>
        <select id="offer-type" name="offerType"  required>
            <option value="product" <%= offer.offerType === 'product' ? 'selected' : '' %>>Product</option>
            <option value="category" <%= offer.offerType === 'category' ? 'selected' : '' %>>Category</option>
        </select>
      </div>

      <div class="form-group">
        <label for="discount-type">Discount Type:</label>
        <select id="discount-type" name="discountType" required>
          <option value="percentage">Percentage</option>
        </select>
      </div>

      <div class="form-group">
        <label for="discount-value">Discount Value:</label>
        <input type="number" id="discount-value" name="discountValue" value="<%= offer.discountValue %>" placeholder="Enter discount percentage" min="1" required>
      </div>

      <div class="form-group">
        <label for="minimum-order-value">Minimum Order Value:</label>
        <input type="number" id="minimum-order-value" value="<%= offer.minimumOrderValue %>" name="minimumOrderValue" placeholder="Enter minimum order value">
      </div>

      <div class="form-group">
        <label for="expiry-date">Expiry Date:</label>
        <input type="date" id="expiry-date" name="expiryDate" value="<%= offer.expiryDate ? offer.expiryDate.toISOString().split('T')[0] : '' %>"                     min="<%= new Date().toISOString().split('T')[0] %>" 
        required>

      </div>

      <div class="form-group">
        <label for="Starting-Date">Start Date:</label>
        <input type="date" id="Starting-Date" value="<%= offer.StartingDate ? offer.StartingDate.toISOString().split('T')[0] : '' %>" name="StartingDate"                     min="<%= new Date().toISOString().split('T')[0] %>" 
        required>

      </div>

      <div class="form-group">
        <label for="is-active">Is Active:</label>
        <select id="is-active" name="isActive">
            <option value="true" <%= offer.isActive === true ? 'selected' : '' %>>Yes</option>
            <option value="false" <%= offer.isActive === false ? 'selected' : '' %>>No</option>
        </select>
      </div>

      <!-- Updated button with ID and class -->
      <button type="submit" id="offer-create-btn" class="submit-btn create-offer-btn">Create Offer</button>
    </form>
</div>

<script src="/jsAdmin/updateOffers.js"></script>
<%- include('../partials/admin/footer') %>
