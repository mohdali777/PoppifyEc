<%- include('../partials/admin/header') %>
<%- include('../partials/admin/sidebar') %>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<!-- Dashboard Container -->
<div class="dashboard-container" style="width: 1150px; margin: 40px 50px; background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);">
  <h1 style="text-align: center; font-size: 2.5rem; color: #333; margin-bottom: 30px;">Admin Dashboard</h1>


  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <div>
      <label for="timePeriod" style="font-size: 1.2rem; color: #444;">Select Time Period:</label>
      <select id="timePeriod" style="padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-right: 10px;">
        <option value="monthly">Monthly</option>
        <option value="yearly">Yearly</option>
      </select>
    </div>
    <button id="filterBtn" style="padding: 12px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 8px; font-size: 1.2rem; cursor: pointer;" onclick="renderRevenueChart()">Apply Filter</button>
  </div>

  <!-- Dashboard Stats and Revenue Chart Section -->
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
    <!-- Total Orders -->
    <div style="background: #f3f4f6; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); text-align: center;">
      <h3 style="font-size: 1.8rem; color: #444;">Total Orders</h3>
      <p style="font-size: 2.5rem; font-weight: bold; color: #4CAF50;" id="sss"><%= Orders.length %></p>
    </div>

    <!-- Total Users -->
    <div style="background: #f3f4f6; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); text-align: center;">
      <h3 style="font-size: 1.8rem; color: #444;">Total Users</h3>
      <p style="font-size: 2.5rem; font-weight: bold; color: #FF9800;"><%= Users.length %></p>
    </div>

    <!-- Revenue Chart -->
    <div style="grid-column: span 2; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
      <h3 style="font-size: 1.8rem; color: #444; text-align: center;">Revenue (Monthly)</h3>
      <canvas id="revenueChart" width="600" height="400"></canvas>
    </div>
  </div>

  <!-- Best Selling Products, Categories & Brands Section -->
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
    <!-- Best Selling Products Table -->
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
      <h4 style="font-size: 1.6rem; color: #444; margin-bottom: 20px;">Best Selling Products</h4>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: #f3f4f6;">
            <th style="padding: 10px; text-align: left;">Product</th>
            <th style="padding: 10px; text-align: left;">Sales</th>
          </tr>
        </thead>
        <% BestProduct.forEach((product)=>{%>
        <tbody>
          <tr>
            <td style="padding: 10px;"><%= product.productName %></td>
            <td style="padding: 10px;"><%= product.totalSold %></td>
          </tr>
        </tbody>
        <% })%>
      </table>
    </div>

    <!-- Best Selling Categories Table -->
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
      <h4 style="font-size: 1.6rem; color: #444; margin-bottom: 20px;">Best Selling Categories</h4>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: #f3f4f6;">
            <th style="padding: 10px; text-align: left;">Category</th>
            <th style="padding: 10px; text-align: left;">Sales</th>
          </tr>
        </thead>
        <% BestCategory.forEach((product)=>{%>
        <tbody>
          <tr>
            <td style="padding: 10px;"><%= product._id %></td>
            <td style="padding: 10px;"><%= product.totalSold %></td>
          </tr>
        </tbody>
        <% })%>
      </table>
    </div>

    <!-- Best Selling Brands Table -->
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
      <h4 style="font-size: 1.6rem; color: #444; margin-bottom: 20px;">Best Selling Brands</h4>
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="background: #f3f4f6;">
            <th style="padding: 10px; text-align: left;">Brand</th>
            <th style="padding: 10px; text-align: left;">Sales</th>
          </tr>
        </thead>
        <% BestBrand.forEach((product)=>{%>
          <tbody>
            <tr>
              <td style="padding: 10px;"><%= product._id %></td>
              <td style="padding: 10px;"><%= product.totalSold %></td>
            </tr>
          </tbody>
          <% })%>
      </table>
    </div>
  </div>
</div>

<script src="/jsAdmin/Dash.js"></script>


<%- include('../partials/admin/footer') %>
