<%- include('../partials/user/header') %>
<%- include('../partials/user/navbar') %>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/izitoast/dist/css/iziToast.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/izitoast/dist/js/iziToast.min.js"></script>

<style>
    .filter-sort-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding: 10px 20px;
        border-radius: 5px;
        margin-top: 20px;
        
    }

    .filter-section, .search-section, .sort-section {
        display: flex;
        flex-direction: column;
        margin-left: 20px;
        gap: 10px;
    }

    .filter-section h3, .search-section h3, .sort-section h3 {
        margin: 0 0 10px 0;
        font-size: 1.2rem;
    }

    .filter-section select, .sort-section select, .search-section input {
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box;
    }
    .search-section h3{
        margin-left: 60px;
    }

    .product-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .product-item {
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-align: center;
        background-color: #fff;
    }

    .product-item h4 {
        margin: 0 0 10px 0;
    }

    .product-item p {
        margin: 5px 0;
        font-size: 0.9rem;
    }

    #searchInput {
        width: 300px;
        margin-left: 60px;
    }

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .pagination button {
        padding: 10px;
        margin: 0 5px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .pagination button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
    .sort-section{
        margin-left: 600px;
    }
 
    
</style>

<div class="filter-sort-container">
    <!-- Search Section -->
    <div class="search-section">
        <h3>Search</h3>
        <input 
            type="text" 
            id="searchInput" 
            placeholder="Search products..." 
            onkeyup="applyFilters()" 
        />
    </div>

    <!-- Sorting Section -->
    <div class="sort-section">
        <h3 >Sort By</h3>
        <select id="sortOptions" onchange="applyFilters()">
            <option value="popularity">Popularity</option>
            <option value="priceLowToHigh">Price: Low to High</option>
            <option value="priceHighToLow">Price: High to Low</option>
            <option value="averageRatings">Average Ratings</option>
            <option value="featured">Featured</option>
            <option value="newArrivals">New Arrivals</option>
            <option value="aToZ">A - Z</option>
            <option value="zToA">Z - A</option>
        </select>
    </div>

    <!-- Category Filter Section -->
    <div class="filter-section">
        <h3>Category</h3>
        <select id="categoryFilter" onchange="applyFilters()">
            <option value="">All Categories</option>
            <% categories.forEach(category => { %>
                <option value="<%= category.name %>"><%= category.name %></option>
            <% }) %>
        </select>
    </div>


    <div class="filter-section">
        <h3>Variant Range</h3>
        <select id="variantFilter" onchange="applyFilters()">
            <option value="">All Variants</option>
            <option value="128GB">128GB</option>
            <option value="256GB">256GB</option>
            <option value="518GB">518Gb</option>
            <option value="816GB">816GB</option>
            <option value="1TB">1TB</option>
        </select>
    </div>
    <!-- Price Filter Section -->
    <div class="filter-section">
        <h3>Price Range</h3>
        <select id="priceFilter" onchange="applyFilters()">
            <option value="">All Prices</option>
            <option value="0-1000">₹0 - ₹1,000</option>
            <option value="1001-5000">₹1,001 - ₹5,000</option>
            <option value="5001-10000">₹5,001 - ₹10,000</option>
            <option value="10001-50000">₹10,001 - ₹50,000</option>
            <option value="50001-100000">₹50,001 - ₹1,00,000</option>
            <option value="100000-200000">₹1,00,000 - ₹2,00,000</option>
        </select>
    </div>

    <!-- Variant Filter Section -->
</div>


<div class="container py-5">
    <div class="row row-cols-1 row-cols-md-4 g-4" id="productList">
        <!-- Products will be dynamically inserted here -->
    </div>

    <!-- Pagination Controls -->
    <div class="pagination" id="paginationControls">
        <button id="prevPage" onclick="changePage('prev')" disabled>Previous</button>
        <button id="nextPage" onclick="changePage('next')">Next</button>
    </div>
</div>

<script src="/js/shop.js"></script>

<%- include('../partials/user/footer') %>
